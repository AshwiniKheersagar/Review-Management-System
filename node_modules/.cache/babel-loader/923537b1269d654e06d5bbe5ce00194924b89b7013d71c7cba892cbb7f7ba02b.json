{"ast":null,"code":"import _objectSpread from\"C:/Users/Ashwini/Desktop/DPDZERO/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'axios';import{FiArrowLeft,FiStar,FiThumbsUp,FiTrendingUp,FiClock,FiUser,FiRefreshCw,FiChevronLeft,FiChevronRight,FiEdit2,FiTrash2}from'react-icons/fi';import SentimentIndicator from'./SentimentIndicator';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FeedbackHistory=()=>{var _feedbackHistory$find;const{employeeId}=useParams();const navigate=useNavigate();const[state,setState]=useState({feedbackHistory:[],loading:true,error:null,employeeInfo:null,page:1,totalPages:1,refreshKey:0,showDeleteModal:false,feedbackToDelete:null});const{feedbackHistory,loading,error,employeeInfo,page,totalPages,refreshKey,showDeleteModal,feedbackToDelete}=state;console.log(feedbackHistory);const updateState=updates=>{setState(prev=>_objectSpread(_objectSpread({},prev),updates));};useEffect(()=>{const fetchFeedbackHistory=async()=>{try{updateState({loading:true,error:null});const userData=JSON.parse(localStorage.getItem('userData'));const[historyRes,employeeRes]=await Promise.all([axios.get(\"http://localhost:8000/feedback/history/\".concat(employeeId,\"?page=\").concat(page),{headers:{Authorization:\"Bearer \".concat(userData.token)}}),axios.get(\"http://localhost:8000/employees/\".concat(employeeId),{headers:{Authorization:\"Bearer \".concat(userData.token)}})]);const feedbackData=historyRes.data.feedbacks||historyRes.data;const validatedFeedback=feedbackData.map(feedback=>({id:feedback.id,strengths:feedback.strengths||'No strengths provided',areas_to_improve:feedback.areas_to_improve||'No areas for improvement noted',sentiment:feedback.sentiment||'neutral',rating:feedback.rating||0,created_at:feedback.created_at,manager_name:feedback.manager_name||'Unknown Manager',is_acknowledged:feedback.is_acknowledged||false}));updateState({feedbackHistory:validatedFeedback,employeeInfo:employeeRes.data,totalPages:historyRes.data.total_pages||1,loading:false});}catch(err){var _err$response,_err$response$data;updateState({error:((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||err.message||'Failed to load feedback history',loading:false});}};fetchFeedbackHistory();},[employeeId,page,refreshKey]);const handlePageChange=newPage=>{if(newPage>=1&&newPage<=totalPages){updateState({page:newPage});}};const handleEdit=feedback=>{console.log(feedback.is_acknowledged);if(feedback.is_acknowledged)return;navigate(\"/feedback/\".concat(employeeInfo.email),{state:{feedbackData:{id:feedback.id,strengths:feedback.strengths,areas_to_improve:feedback.areas_to_improve,sentiment:feedback.sentiment,rating:feedback.rating},isEdit:true}});};const handleDeleteInit=(feedbackId,isAcknowledged)=>{if(isAcknowledged)return;updateState({feedbackToDelete:feedbackId,showDeleteModal:true});};const handleDeleteConfirm=async()=>{try{const userData=JSON.parse(localStorage.getItem('userData'));await axios.delete(\"http://localhost:8000/feedback/\".concat(feedbackToDelete),{headers:{Authorization:\"Bearer \".concat(userData.token)}});updateState({showDeleteModal:false,refreshKey:refreshKey+1});}catch(err){var _err$response2,_err$response2$data;updateState({error:((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.detail)||err.message||'Failed to delete feedback'});}};const LoadingSpinner=()=>/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"})});const ErrorDisplay=()=>/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-6 max-w-md bg-white rounded-xl shadow-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-5xl mb-4\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-800 mb-2\",children:\"Error Loading Feedback\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),className:\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition\",children:\"Go Back\"})]})});const EmployeeHeader=()=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-md p-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-indigo-100 text-indigo-600 rounded-full p-3 mr-4\",children:/*#__PURE__*/_jsx(FiUser,{className:\"text-xl\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:employeeInfo.name||'Employee'}),employeeInfo.email&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:employeeInfo.email})]})]})});const FeedbackItem=_ref=>{let{feedback}=_ref;const[showComments,setShowComments]=useState(false);const[comments,setComments]=useState(null);const[loadingComments,setLoadingComments]=useState(false);const[commentsError,setCommentsError]=useState(null);const fetchComments=async()=>{if(comments!==null){setShowComments(!showComments);return;}try{setLoadingComments(true);setCommentsError(null);const userData=JSON.parse(localStorage.getItem('userData'));const response=await axios.get(\"http://localhost:8000/feedback/\".concat(feedback.id,\"/acknowledgment\"),{headers:{Authorization:\"Bearer \".concat(userData.token)}});setComments(response.data.comment||\"No comments provided\");setShowComments(true);}catch(err){var _err$response3,_err$response3$data;setCommentsError(((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.detail)||err.message||'Failed to load comments');}finally{setLoadingComments(false);}};const isAcknowledged=feedback.is_acknowledged;const canEdit=!isAcknowledged;const canDelete=!isAcknowledged;return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-md overflow-hidden mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-medium text-gray-800 flex items-center\",children:[/*#__PURE__*/_jsx(FiClock,{className:\"mr-2\"}),feedback.created_at?new Date(feedback.created_at).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'}):'Date not available']}),feedback.manager_name&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Provided by \",feedback.manager_name]}),isAcknowledged&&/*#__PURE__*/_jsx(\"span\",{className:\"inline-block mt-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\",children:\"Acknowledged\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(SentimentIndicator,{sentiment:feedback.sentiment}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-2 flex items-center\",children:[/*#__PURE__*/_jsx(FiStar,{className:\"text-yellow-400 mr-1\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium\",children:[feedback.rating,\"/5\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-green-800 flex items-center mb-2\",children:[/*#__PURE__*/_jsx(FiThumbsUp,{className:\"mr-2\"}),\"Strengths\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:feedback.strengths})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"font-medium text-blue-800 flex items-center mb-2\",children:[/*#__PURE__*/_jsx(FiTrendingUp,{className:\"mr-2\"}),\"Areas for Improvement\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:feedback.areas_to_improve})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:fetchComments,className:\"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center\",children:[showComments?'Hide Comments':'View Comments',loadingComments&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-block animate-spin\",children:/*#__PURE__*/_jsx(FiRefreshCw,{className:\"text-sm\"})})]}),commentsError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-1\",children:commentsError}),showComments&&comments&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 bg-gray-50 p-3 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:comments})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(feedback),disabled:!canEdit,className:\"p-2 rounded-lg transition-colors \".concat(canEdit?'text-indigo-600 hover:bg-indigo-50':'text-gray-400 cursor-not-allowed'),title:canEdit?\"Edit feedback\":\"Cannot edit acknowledged feedback\",children:/*#__PURE__*/_jsx(FiEdit2,{})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteInit(feedback.id,isAcknowledged),disabled:!canDelete,className:\"p-2 rounded-lg transition-colors \".concat(canDelete?'text-red-600 hover:bg-red-50':'text-gray-400 cursor-not-allowed'),title:canDelete?\"Delete feedback\":\"Cannot delete acknowledged feedback\",children:/*#__PURE__*/_jsx(FiTrash2,{})})]})]})});};const PaginationControls=()=>totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-8\",children:/*#__PURE__*/_jsxs(\"nav\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page-1),disabled:page===1,className:\"p-2 rounded-lg \".concat(page===1?'text-gray-400 cursor-not-allowed':'text-indigo-600 hover:bg-indigo-50'),children:/*#__PURE__*/_jsx(FiChevronLeft,{className:\"text-xl\"})}),Array.from({length:Math.min(totalPages,5)},(_,i)=>{let pageNum;if(totalPages<=5){pageNum=i+1;}else if(page<=3){pageNum=i+1;}else if(page>=totalPages-2){pageNum=totalPages-4+i;}else{pageNum=page-2+i;}return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(pageNum),className:\"w-10 h-10 rounded-lg \".concat(page===pageNum?'bg-indigo-600 text-white':'text-gray-700 hover:bg-gray-100'),children:pageNum},pageNum);}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(page+1),disabled:page===totalPages,className:\"p-2 rounded-lg \".concat(page===totalPages?'text-gray-400 cursor-not-allowed':'text-indigo-600 hover:bg-indigo-50'),children:/*#__PURE__*/_jsx(FiChevronRight,{className:\"text-xl\"})})]})});const EmptyState=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl shadow-md p-8 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-400 text-5xl mb-4\",children:\"\\uD83D\\uDCED\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-700 mb-2\",children:\"No Feedback History\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"You haven't provided any feedback for this employee yet.\"})]});if(loading&&page===1)return/*#__PURE__*/_jsx(LoadingSpinner,{});if(error)return/*#__PURE__*/_jsx(ErrorDisplay,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 p-4 md:p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:\"flex items-center text-indigo-600 hover:text-indigo-800 transition-colors\",children:[/*#__PURE__*/_jsx(FiArrowLeft,{className:\"mr-2\"}),\" Back to Team\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateState({refreshKey:refreshKey+1}),className:\"flex items-center text-indigo-600 hover:text-indigo-800 transition-colors\",children:[/*#__PURE__*/_jsx(FiRefreshCw,{className:\"mr-2\"}),\" Refresh\"]})]}),employeeInfo?/*#__PURE__*/_jsx(EmployeeHeader,{}):/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-md p-6 mb-8 animate-pulse\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-200 rounded-full p-3 mr-4\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-6 bg-gray-200 rounded w-32 mb-2\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-4 bg-gray-200 rounded w-48\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:feedbackHistory.length===0?/*#__PURE__*/_jsx(EmptyState,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[feedbackHistory.map(feedback=>/*#__PURE__*/_jsx(FeedbackItem,{feedback:feedback},feedback.id)),/*#__PURE__*/_jsx(PaginationControls,{})]})})]}),showDeleteModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-xl shadow-lg p-6 w-full max-w-md\",children:feedbackToDelete&&(_feedbackHistory$find=feedbackHistory.find(f=>f.id===feedbackToDelete))!==null&&_feedbackHistory$find!==void 0&&_feedbackHistory$find.is_acknowledged?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Cannot Delete\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-6\",children:\"This feedback has been acknowledged and cannot be deleted.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateState({showDeleteModal:false}),className:\"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\",children:\"OK\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Confirm Deletion\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-6\",children:\"Are you sure you want to delete this feedback? This action cannot be undone.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateState({showDeleteModal:false}),className:\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteConfirm,className:\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\",children:\"Delete\"})]})]})})})]});};export default FeedbackHistory;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","FiArrowLeft","FiStar","FiThumbsUp","FiTrendingUp","FiClock","FiUser","FiRefreshCw","FiChevronLeft","FiChevronRight","FiEdit2","FiTrash2","SentimentIndicator","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FeedbackHistory","_feedbackHistory$find","employeeId","navigate","state","setState","feedbackHistory","loading","error","employeeInfo","page","totalPages","refreshKey","showDeleteModal","feedbackToDelete","console","log","updateState","updates","prev","_objectSpread","fetchFeedbackHistory","userData","JSON","parse","localStorage","getItem","historyRes","employeeRes","Promise","all","get","concat","headers","Authorization","token","feedbackData","data","feedbacks","validatedFeedback","map","feedback","id","strengths","areas_to_improve","sentiment","rating","created_at","manager_name","is_acknowledged","total_pages","err","_err$response","_err$response$data","response","detail","message","handlePageChange","newPage","handleEdit","email","isEdit","handleDeleteInit","feedbackId","isAcknowledged","handleDeleteConfirm","delete","_err$response2","_err$response2$data","LoadingSpinner","className","children","ErrorDisplay","onClick","EmployeeHeader","name","FeedbackItem","_ref","showComments","setShowComments","comments","setComments","loadingComments","setLoadingComments","commentsError","setCommentsError","fetchComments","comment","_err$response3","_err$response3$data","canEdit","canDelete","Date","toLocaleDateString","year","month","day","disabled","title","PaginationControls","Array","from","length","Math","min","_","i","pageNum","EmptyState","find","f"],"sources":["C:/Users/Ashwini/Desktop/DPDZERO/frontend/src/components/Feedback/FeedbackHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport {\r\n  FiArrowLeft,\r\n  FiStar,\r\n  FiThumbsUp,\r\n  FiTrendingUp,\r\n  FiClock,\r\n  FiUser,\r\n  FiRefreshCw,\r\n  FiChevronLeft,\r\n  FiChevronRight,\r\n  FiEdit2, \r\n  FiTrash2\r\n} from 'react-icons/fi';\r\nimport SentimentIndicator from './SentimentIndicator';\r\n\r\nconst FeedbackHistory = () => {\r\n  const { employeeId } = useParams();\r\n  const navigate = useNavigate();\r\n  \r\n  const [state, setState] = useState({\r\n    feedbackHistory: [],\r\n    loading: true,\r\n    error: null,\r\n    employeeInfo: null,\r\n    page: 1,\r\n    totalPages: 1,\r\n    refreshKey: 0,\r\n    showDeleteModal: false,\r\n    feedbackToDelete: null\r\n  });\r\n\r\n  \r\n  \r\n  const {\r\n    feedbackHistory,\r\n    loading,\r\n    error,\r\n    employeeInfo,\r\n    page,\r\n    totalPages,\r\n    refreshKey,\r\n    showDeleteModal,\r\n    feedbackToDelete\r\n  } = state;\r\n\r\n  console.log(feedbackHistory);\r\n  const updateState = (updates) => {\r\n    setState(prev => ({ ...prev, ...updates }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchFeedbackHistory = async () => {\r\n      try {\r\n        updateState({ loading: true, error: null });\r\n        const userData = JSON.parse(localStorage.getItem('userData'));\r\n        \r\n        const [historyRes, employeeRes] = await Promise.all([\r\n          axios.get(`http://localhost:8000/feedback/history/${employeeId}?page=${page}`, {\r\n            headers: { Authorization: `Bearer ${userData.token}` }\r\n          }),\r\n          axios.get(`http://localhost:8000/employees/${employeeId}`, {\r\n            headers: { Authorization: `Bearer ${userData.token}` }\r\n          })\r\n        ]);\r\n\r\n        const feedbackData = historyRes.data.feedbacks || historyRes.data;\r\n        const validatedFeedback = feedbackData.map(feedback => ({\r\n          id: feedback.id,\r\n          strengths: feedback.strengths || 'No strengths provided',\r\n          areas_to_improve: feedback.areas_to_improve || 'No areas for improvement noted',\r\n          sentiment: feedback.sentiment || 'neutral',\r\n          rating: feedback.rating || 0,\r\n          created_at: feedback.created_at,\r\n          manager_name: feedback.manager_name || 'Unknown Manager',\r\n          is_acknowledged: feedback.is_acknowledged || false\r\n        }));\r\n\r\n        updateState({\r\n          feedbackHistory: validatedFeedback,\r\n          employeeInfo: employeeRes.data,\r\n          totalPages: historyRes.data.total_pages || 1,\r\n          loading: false\r\n        });\r\n      } catch (err) {\r\n        updateState({\r\n          error: err.response?.data?.detail || err.message || 'Failed to load feedback history',\r\n          loading: false\r\n        });\r\n      }\r\n    };\r\n\r\n    fetchFeedbackHistory();\r\n  }, [employeeId, page, refreshKey]);\r\n\r\n  const handlePageChange = (newPage) => {\r\n    if (newPage >= 1 && newPage <= totalPages) {\r\n      updateState({ page: newPage });\r\n    }\r\n  };\r\n\r\n  const handleEdit = (feedback) => {\r\n    console.log(feedback.is_acknowledged);\r\n    \r\n    if (feedback.is_acknowledged) return;\r\n    \r\n    navigate(`/feedback/${employeeInfo.email}`, {\r\n      state: {\r\n        feedbackData: {\r\n          id: feedback.id,\r\n          strengths: feedback.strengths,\r\n          areas_to_improve: feedback.areas_to_improve,\r\n          sentiment: feedback.sentiment,\r\n          rating: feedback.rating\r\n        },\r\n        isEdit: true\r\n      }\r\n    });\r\n  };\r\n\r\n const handleDeleteInit = (feedbackId, isAcknowledged) => {\r\n  if (isAcknowledged) return;\r\n  \r\n  updateState({\r\n    feedbackToDelete: feedbackId,\r\n    showDeleteModal: true\r\n  });\r\n};\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    try {\r\n      const userData = JSON.parse(localStorage.getItem('userData'));\r\n      await axios.delete(`http://localhost:8000/feedback/${feedbackToDelete}`, {\r\n        headers: { Authorization: `Bearer ${userData.token}` }\r\n      });\r\n      updateState({\r\n        showDeleteModal: false,\r\n        refreshKey: refreshKey + 1\r\n      });\r\n    } catch (err) {\r\n      updateState({\r\n        error: err.response?.data?.detail || err.message || 'Failed to delete feedback'\r\n      });\r\n    }\r\n  };\r\n\r\n  const LoadingSpinner = () => (\r\n    <div className=\"flex items-center justify-center h-screen\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\r\n    </div>\r\n  );\r\n\r\n  const ErrorDisplay = () => (\r\n    <div className=\"flex items-center justify-center h-screen\">\r\n      <div className=\"text-center p-6 max-w-md bg-white rounded-xl shadow-md\">\r\n        <div className=\"text-red-500 text-5xl mb-4\">⚠️</div>\r\n        <h2 className=\"text-xl font-bold text-gray-800 mb-2\">Error Loading Feedback</h2>\r\n        <p className=\"text-gray-600 mb-4\">{error}</p>\r\n        <button\r\n          onClick={() => navigate(-1)}\r\n          className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition\"\r\n        >\r\n          Go Back\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const EmployeeHeader = () => (\r\n    <div className=\"bg-white rounded-xl shadow-md p-6 mb-8\">\r\n      <div className=\"flex items-center\">\r\n        <div className=\"bg-indigo-100 text-indigo-600 rounded-full p-3 mr-4\">\r\n          <FiUser className=\"text-xl\" />\r\n        </div>\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-800\">\r\n            {employeeInfo.name || 'Employee'}\r\n          </h1>\r\n          {employeeInfo.email && (\r\n            <p className=\"text-gray-500\">{employeeInfo.email}</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const FeedbackItem = ({ feedback }) => {\r\n  const [showComments, setShowComments] = useState(false);\r\n  const [comments, setComments] = useState(null);\r\n  const [loadingComments, setLoadingComments] = useState(false);\r\n  const [commentsError, setCommentsError] = useState(null);\r\n\r\n  const fetchComments = async () => {\r\n    if (comments !== null) {\r\n      setShowComments(!showComments);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoadingComments(true);\r\n      setCommentsError(null);\r\n      const userData = JSON.parse(localStorage.getItem('userData'));\r\n      const response = await axios.get(\r\n        `http://localhost:8000/feedback/${feedback.id}/acknowledgment`,\r\n        {\r\n          headers: { Authorization: `Bearer ${userData.token}` }\r\n        }\r\n      );\r\n      setComments(response.data.comment || \"No comments provided\");\r\n      setShowComments(true);\r\n    } catch (err) {\r\n      setCommentsError(err.response?.data?.detail || err.message || 'Failed to load comments');\r\n    } finally {\r\n      setLoadingComments(false);\r\n    }\r\n  };\r\n\r\n  const isAcknowledged = feedback.is_acknowledged;\r\n  const canEdit = !isAcknowledged;\r\n  const canDelete = !isAcknowledged;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-md overflow-hidden mb-6\">\r\n      <div className=\"p-6\">\r\n        <div className=\"flex justify-between items-start mb-4\">\r\n          <div>\r\n            <h3 className=\"font-medium text-gray-800 flex items-center\">\r\n              <FiClock className=\"mr-2\" />\r\n              {feedback.created_at ? (\r\n                new Date(feedback.created_at).toLocaleDateString('en-US', {\r\n                  year: 'numeric',\r\n                  month: 'long',\r\n                  day: 'numeric'\r\n                })\r\n              ) : 'Date not available'}\r\n            </h3>\r\n            {feedback.manager_name && (\r\n              <p className=\"text-sm text-gray-500\">\r\n                Provided by {feedback.manager_name}\r\n              </p>\r\n            )}\r\n            {isAcknowledged && (\r\n              <span className=\"inline-block mt-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\">\r\n                Acknowledged\r\n              </span>\r\n            )}\r\n          </div>\r\n          <div className=\"flex items-center\">\r\n            <SentimentIndicator sentiment={feedback.sentiment} />\r\n            <div className=\"ml-2 flex items-center\">\r\n              <FiStar className=\"text-yellow-400 mr-1\" />\r\n              <span className=\"font-medium\">{feedback.rating}/5</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n          <div className=\"bg-green-50 rounded-lg p-4\">\r\n            <h4 className=\"font-medium text-green-800 flex items-center mb-2\">\r\n              <FiThumbsUp className=\"mr-2\" />\r\n              Strengths\r\n            </h4>\r\n            <p className=\"text-gray-700\">{feedback.strengths}</p>\r\n          </div>\r\n          <div className=\"bg-blue-50 rounded-lg p-4\">\r\n            <h4 className=\"font-medium text-blue-800 flex items-center mb-2\">\r\n              <FiTrendingUp className=\"mr-2\" />\r\n              Areas for Improvement\r\n            </h4>\r\n            <p className=\"text-gray-700\">{feedback.areas_to_improve}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Comments section */}\r\n        <div className=\"mb-4\">\r\n          <button\r\n            onClick={fetchComments}\r\n            className=\"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center\"\r\n          >\r\n            {showComments ? 'Hide Comments' : 'View Comments'}\r\n            {loadingComments && (\r\n              <span className=\"ml-2 inline-block animate-spin\">\r\n                <FiRefreshCw className=\"text-sm\" />\r\n              </span>\r\n            )}\r\n          </button>\r\n          \r\n          {commentsError && (\r\n            <p className=\"text-red-500 text-sm mt-1\">{commentsError}</p>\r\n          )}\r\n          \r\n          {showComments && comments && (\r\n            <div className=\"mt-2 bg-gray-50 p-3 rounded-lg\">\r\n              <p className=\"text-gray-700\">{comments}</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex space-x-2\">\r\n          <button \r\n            onClick={() => handleEdit(feedback)}\r\n            disabled={!canEdit}\r\n            className={`p-2 rounded-lg transition-colors ${\r\n              canEdit \r\n                ? 'text-indigo-600 hover:bg-indigo-50' \r\n                : 'text-gray-400 cursor-not-allowed'\r\n            }`}\r\n            title={canEdit ? \"Edit feedback\" : \"Cannot edit acknowledged feedback\"}\r\n          >\r\n            <FiEdit2 />\r\n          </button>\r\n          <button \r\n            onClick={() => handleDeleteInit(feedback.id, isAcknowledged)}\r\n            disabled={!canDelete}\r\n            className={`p-2 rounded-lg transition-colors ${\r\n              canDelete \r\n                ? 'text-red-600 hover:bg-red-50' \r\n                : 'text-gray-400 cursor-not-allowed'\r\n            }`}\r\n            title={canDelete ? \"Delete feedback\" : \"Cannot delete acknowledged feedback\"}\r\n          >\r\n            <FiTrash2 />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n  const PaginationControls = () => (\r\n    totalPages > 1 && (\r\n      <div className=\"flex justify-center mt-8\">\r\n        <nav className=\"flex items-center space-x-2\">\r\n          <button\r\n            onClick={() => handlePageChange(page - 1)}\r\n            disabled={page === 1}\r\n            className={`p-2 rounded-lg ${page === 1 ? 'text-gray-400 cursor-not-allowed' : 'text-indigo-600 hover:bg-indigo-50'}`}\r\n          >\r\n            <FiChevronLeft className=\"text-xl\" />\r\n          </button>\r\n          \r\n          {Array.from({ length: Math.min(totalPages, 5) }, (_, i) => {\r\n            let pageNum;\r\n            if (totalPages <= 5) {\r\n              pageNum = i + 1;\r\n            } else if (page <= 3) {\r\n              pageNum = i + 1;\r\n            } else if (page >= totalPages - 2) {\r\n              pageNum = totalPages - 4 + i;\r\n            } else {\r\n              pageNum = page - 2 + i;\r\n            }\r\n            \r\n            return (\r\n              <button\r\n                key={pageNum}\r\n                onClick={() => handlePageChange(pageNum)}\r\n                className={`w-10 h-10 rounded-lg ${page === pageNum ? 'bg-indigo-600 text-white' : 'text-gray-700 hover:bg-gray-100'}`}\r\n              >\r\n                {pageNum}\r\n              </button>\r\n            );\r\n          })}\r\n\r\n          <button\r\n            onClick={() => handlePageChange(page + 1)}\r\n            disabled={page === totalPages}\r\n            className={`p-2 rounded-lg ${page === totalPages ? 'text-gray-400 cursor-not-allowed' : 'text-indigo-600 hover:bg-indigo-50'}`}\r\n          >\r\n            <FiChevronRight className=\"text-xl\" />\r\n          </button>\r\n        </nav>\r\n      </div>\r\n    )\r\n  );\r\n\r\n  const EmptyState = () => (\r\n    <div className=\"bg-white rounded-xl shadow-md p-8 text-center\">\r\n      <div className=\"text-gray-400 text-5xl mb-4\">📭</div>\r\n      <h3 className=\"text-xl font-semibold text-gray-700 mb-2\">\r\n        No Feedback History\r\n      </h3>\r\n      <p className=\"text-gray-500\">\r\n        You haven't provided any feedback for this employee yet.\r\n      </p>\r\n    </div>\r\n  );\r\n\r\n  if (loading && page === 1) return <LoadingSpinner />;\r\n  if (error) return <ErrorDisplay />;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 p-4 md:p-8\">\r\n      <div className=\"max-w-4xl mx-auto\">\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <button\r\n            onClick={() => navigate(-1)}\r\n            className=\"flex items-center text-indigo-600 hover:text-indigo-800 transition-colors\"\r\n          >\r\n            <FiArrowLeft className=\"mr-2\" /> Back to Team\r\n          </button>\r\n          <button\r\n            onClick={() => updateState({ refreshKey: refreshKey + 1 })}\r\n            className=\"flex items-center text-indigo-600 hover:text-indigo-800 transition-colors\"\r\n          >\r\n            <FiRefreshCw className=\"mr-2\" /> Refresh\r\n          </button>\r\n        </div>\r\n\r\n        {employeeInfo ? <EmployeeHeader /> : (\r\n          <div className=\"bg-white rounded-xl shadow-md p-6 mb-8 animate-pulse\">\r\n            <div className=\"flex items-center\">\r\n              <div className=\"bg-gray-200 rounded-full p-3 mr-4\"></div>\r\n              <div>\r\n                <div className=\"h-6 bg-gray-200 rounded w-32 mb-2\"></div>\r\n                <div className=\"h-4 bg-gray-200 rounded w-48\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"space-y-4\">\r\n          {feedbackHistory.length === 0 ? <EmptyState /> : (\r\n            <>\r\n              {feedbackHistory.map(feedback => (\r\n                <FeedbackItem key={feedback.id} feedback={feedback} />\r\n              ))}\r\n              <PaginationControls />\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      {showDeleteModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-xl shadow-lg p-6 w-full max-w-md\">\r\n            {feedbackToDelete && feedbackHistory.find(f => f.id === feedbackToDelete)?.is_acknowledged ? (\r\n              <>\r\n                <h2 className=\"text-xl font-bold mb-4\">Cannot Delete</h2>\r\n                <p className=\"mb-6\">This feedback has been acknowledged and cannot be deleted.</p>\r\n                <button\r\n                  onClick={() => updateState({ showDeleteModal: false })}\r\n                  className=\"w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\"\r\n                >\r\n                  OK\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <h2 className=\"text-xl font-bold mb-4\">Confirm Deletion</h2>\r\n                <p className=\"mb-6\">Are you sure you want to delete this feedback? This action cannot be undone.</p>\r\n                <div className=\"flex justify-end space-x-3\">\r\n                  <button\r\n                    onClick={() => updateState({ showDeleteModal: false })}\r\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleDeleteConfirm}\r\n                    className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FeedbackHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}